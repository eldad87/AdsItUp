composer
download http://dev.maxmind.com/geoip/geoip2/geolite2/ to /AppBundle/MaxMindDB/GeoLite2-City.mmdb
on new platform, add a new %Platform%Setting class


View
	Pixel log
	Brand record

Cron
	Pixel
		search for status = STATUS_SERVER_PENDING
			++Attempt
		fire
	Commission Cron
		search for isCommissionGranted = false
			set true
		grant commission
			use repo (update user set balance += x) instead of $brandRecord->getUser()->incBalance($commissionPlan->getPayout());
				which can be defected by race condition
	Spot updates

Referrer - commission plan

platform_record entity
	id, brand, external_id
		type (lead|customer|deposit),
		user_id}, , click_id, offer_banner_id, offer_id,
		ref_user_id
		created, updated, commission_id, commission_payout
	unique: brand, external_id


		external_created, external_updated,
		ref_commission_payout, ref_commission_id



session - save click for 30D in order to identify unique visitors
clickID = uuid
lead -> get info by id -> identify affiliate: (id, offer, banner, click) -> check if qualified -> grant commission